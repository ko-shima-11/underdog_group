<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>施設申請モック</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-shell">
    <header>
      <div>
        <h1>施設利用申請モック</h1>
        <p>ロールごとに初期画面を出し分け。スワイプや簡易カレンダーで動きを確認できます。</p>
      </div>
      <div class="role-toggle" aria-label="ロール切り替え">
        <button class="active" data-role="applicant">申請者</button>
        <button data-role="approver">承認者</button>
        <button data-role="manager">施設管理者</button>
      </div>
    </header>
    <main>
      <section class="panel active" id="applicant">
        <div class="card" style="margin-bottom: 16px;">
          <h3>週間カレンダー</h3>
          <small>各施設の1週間の使用状況を確認できます。</small>
          <div class="facility-selector">
            <label for="applicant-facility-select">施設を選択:</label>
            <select id="applicant-facility-select">
              <option value="大講義室">大講義室</option>
              <option value="ICTホール">ICTホール</option>
              <option value="ワーキングコモンズ">ワーキングコモンズ</option>
              <option value="PBL演習室">PBL演習室</option>
              <option value="カンファレンスルーム">カンファレンスルーム</option>
              <option value="第一体育館">第一体育館</option>
            </select>
          </div>
          <div class="date-selector" style="margin: 12px 0;">
            <label for="applicant-week-start">表示開始日を選択:</label>
            <input id="applicant-week-start" type="date" style="max-width: 200px;">
          </div>
          <div class="weekly-calendar" id="applicant-calendar"></div>
          <div class="legend" style="margin-top: 12px;">
            <span><span class="dot" style="background:#ff6b6b;"></span>予約済</span>
            <span><span class="dot" style="background:#4fd1c5;"></span>空き</span>
          </div>
        </div>
        <div class="grid two">
          <div class="card">
            <h3>申請画面</h3>
            <small>申請者が最初に開く画面。入力と同時に右側プレビューへ反映。</small>
            <div class="form-row">
              <div>
                <label for="facility">利用施設 <span class="required">*</span></label>
                <select id="facility" required>
                  <option>大講義室</option>
                  <option>ICTホール</option>
                  <option>ワーキングコモンズ</option>
                  <option>カンファレンスルーム</option>
                </select>
              </div>
              <div>
                <label for="date">利用日 <span class="required">*</span></label>
                <input id="date" type="date" required>
              </div>
            </div>
            <div class="form-row">
              <div>
                <label for="start">開始時刻 <span class="required">*</span></label>
                <input id="start" type="time" value="10:00" required>
              </div>
              <div>
                <label for="end">終了時刻 <span class="required">*</span></label>
                <input id="end" type="time" value="12:00" required>
              </div>
              <div>
                <label for="people">利用人数 <span class="required">*</span></label>
                <input id="people" type="number" min="1" value="6" required>
              </div>
            </div>
            <label for="purpose">利用目的 <span class="required">*</span></label>
            <input id="purpose" type="text" placeholder="例: チーム勉強会 / 実験レビュー" required>
            <label for="memo" style="margin-top:10px;">連絡事項・備品希望</label>
            <textarea id="memo" placeholder="希望備品や当日の流れなど"></textarea>
            <div style="margin-top: 12px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
              <button class="btn-submit" id="submit-request" type="button">
                <span class="btn-icon">📝</span> 申請を送信する
              </button>
              <button class="btn-secondary" type="button" id="quick-fill">
                サンプル自動入力
              </button>
              <button class="btn-secondary" type="button" id="clear-form">
                クリア
              </button>
            </div>
          </div>
          <div class="card">
            <h3>入力内容のプレビュー</h3>
            <div class="preview-box" id="preview">
              <span class="chip accent">施設: 大講義室</span>
              <span class="chip warn">日付: -</span>
              <span class="chip">時間: 10:00 - 12:00</span>
              <span class="chip">人数: 6 名</span>
              <p id="preview-purpose">用途: -</p>
              <p id="preview-memo">連絡事項: -</p>
            </div>
            <div class="card-grid" style="margin-top: 14px;">
              <div class="metric">
                <span class="label">処理ステータス</span>
                <span class="value">下書き</span>
              </div>
              <div class="metric">
                <span class="label">承認経路</span>
                <span class="value">主管 → 管理者</span>
              </div>
              <div class="metric">
                <span class="label">通知先</span>
                <span class="value">Slack #facility</span>
              </div>
            </div>
          </div>
        </div>
        <div class="card" style="margin-top: 16px;">
          <h3>予約済み一覧</h3>
          <small>あなたの予約を管理できます。</small>
          <ul class="reservation-list" id="reservation-list"></ul>
        </div>
      </section>

      <section class="panel" id="approver">
        <div class="grid two">
          <div class="card">
            <div class="swipe-hint">
              <span>左: 拒否</span>
              <div class="bar"></div>
              <span>右: 承認</span>
            </div>
            <div class="deck" id="deck"></div>
            <div class="deck-empty" id="deck-empty" style="display:none;">新規の申請はありません</div>
            <div class="deck-actions">
              <button class="danger-btn" id="reject-btn">
                拒否する
              </button>
              <button class="approve-btn" id="approve-btn">
                承認する
              </button>
            </div>
          </div>
          <div class="card">
            <h3>最近の判定</h3>
            <small>アクションはここに積み上がります</small>
            <ul class="decision-log" id="decision-log"></ul>
          </div>
        </div>
      </section>

      <section class="panel" id="manager">
        <div class="card" style="margin-bottom: 16px;">
          <h3>週間カレンダー</h3>
          <small>各施設の1週間の使用状況を確認できます。</small>
          <div class="facility-selector">
            <label for="facility-select">施設を選択:</label>
            <select id="facility-select">
              <option value="大講義室">大講義室</option>
              <option value="ICTホール">ICTホール</option>
              <option value="ワーキングコモンズ">ワーキングコモンズ</option>
              <option value="PBL演習室">PBL演習室</option>
              <option value="カンファレンスルーム">カンファレンスルーム</option>
              <option value="第一体育館">第一体育館</option>
            </select>
          </div>
          <div class="date-selector" style="margin: 12px 0;">
            <label for="manager-week-start">表示開始日を選択:</label>
            <input id="manager-week-start" type="date" style="max-width: 200px;">
          </div>
          <div class="weekly-calendar" id="weekly-calendar"></div>
          <div class="legend" style="margin-top: 12px;">
            <span><span class="dot" style="background:#ff6b6b;"></span>予約済</span>
            <span><span class="dot" style="background:#4fd1c5;"></span>空き</span>
          </div>
        </div>
        <div class="grid two">
          <div class="card">
            <h3>通知リスト</h3>
            <small>施設管理者が最初に開く画面。申請を選ぶと右側のカレンダーへ。</small>
            <ul class="notification-list" id="notification-list"></ul>
          </div>
          <div class="card">
            <h3 id="schedule-title">カレンダー</h3>
            <small id="schedule-sub">通知を選択してください</small>
            <div class="legend">
              <span><span class="dot" style="background:#ff6b6b;"></span>予約済</span>
              <span><span class="dot" style="background:#4fd1c5;"></span>空き</span>
            </div>
            <div class="calendar" id="calendar"></div>
            <div class="schedule-actions">
              <button class="btn-reject-small" id="manager-reject">
                拒否する
              </button>
              <button class="primary" id="manager-approve">
                承認する
              </button>
            </div>
          </div>
        </div>
      </section>
    </main>
    <div class="toast" id="toast">申請を送信しました</div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
